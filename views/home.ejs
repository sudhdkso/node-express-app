<!-- home.ejs -->
<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <title><%= title %></title>
        <link rel="stylesheet" href="/styles.css" />
    </head>
    <body>
        <div class="vertical-column">
            <div class="menu-bar">
                <% if (user) { %>
                <div class="menu-dropdown">
                    <span class="username" id="menuToggle"
                        ><%= user.name %></span
                    >
                    <div class="dropdown-menu" id="dropdownMenu">
                        <form action="/logout" method="post">
                            <button type="submit" class="logout-btn">
                                로그아웃
                            </button>
                        </form>
                        <!-- 추후 메뉴 항목 추가 가능 -->
                    </div>
                </div>
                <% } else { %>
                <a href="/login" class="login-btn">로그인</a>
                <% } %>
            </div>
            <div class="main-content">
                <h1>홈 화면</h1>
                <p>이곳은 가운데 정렬된 세로 직사각형(컬럼)입니다.</p>
            </div>
        </div>
    </body>
</html>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const menuToggle = document.getElementById('menuToggle');
        const menuDropdown = menuToggle?.parentElement;
        if (menuToggle && menuDropdown) {
            menuToggle.addEventListener('click', function (e) {
                e.stopPropagation();
                menuDropdown.classList.toggle('open');
            });
            // 메뉴 바깥 클릭 시 닫기
            document.addEventListener('click', function () {
                menuDropdown.classList.remove('open');
            });
        }
    });
</script>
